const sections = [
  {
    title: "第一部分：关系模式（1–10）",
    questions: [
      ["当你喜欢上一个人，你通常会？", "很快表达", "等对方主动", "悄悄观察", "不敢说"],
      ["你更容易被什么吸引？", "外貌", "性格", "温柔", "神秘感"],
      ["如果喜欢的人忽冷忽热，你会？", "越追越紧", "慢慢冷淡", "继续试探", "直接放弃"],
      ["在恋爱中，你更倾向于？", "强烈依恋", "独立空间", "互相依靠", "各自自由"],
      ["分手后你通常会？", "很难放下", "很快恢复", "怀疑自己", "做回朋友"],
      ["你对暧昧的态度？", "沉迷", "不安全", "小心", "无所谓"],
      ["你理想的恋爱节奏？", "迅速确定关系", "慢慢熟悉", "先当朋友", "顺其自然"],
      ["最不能忍受对方？", "冷暴力", "欺骗", "忽视", "控制"],
      ["会带恋人进朋友圈吗？", "会", "慎重", "视情况", "不想"],
      ["对方情绪低落时你会？", "马上安慰", "给空间", "想但不会安慰", "陪着但不讲话"]
    ]
  },
  {
    title: "第二部分：依恋与安全感（11–20）",
    questions: [
      ["对方回消息很慢，你会？", "焦虑", "理解", "有点不安", "也慢回"],
      ["“没回消息 = 不喜欢我”", "是", "有点是", "不完全", "不是"],
      ["你想要的伴侣类型？", "黏你", "理智", "细腻", "自由"],
      ["你最怕的恋爱问题？", "被抛弃", "被误解", "被忽视", "被控制"],
      ["会担心配不上喜欢的人吗？", "经常", "有时", "偶尔", "不会"],
      ["对方太忙时你会？", "抱怨", "忍耐", "做自己事", "怀疑是否合适"],
      ["你会频繁观察对方情绪吗？", "会", "偶尔", "不太", "不会"],
      ["恋爱必须每天联系？", "必须", "最好", "随意", "不需要"],
      ["你更害怕？", "投入后被伤害", "单恋", "爱错人", "没遇到喜欢的人"],
      ["对方突然冷淡你会？", "找原因", "焦虑", "冷回去", "摊牌"]
    ]
  },
  {
    title: "第三部分：表达方式与冲突（21–30）",
    questions: [
      ["吵架时你是？", "爆发", "沉默", "掉眼泪", "讲道理"],
      ["受委屈时？", "当场说", "忍着", "过后说", "观察后再表达"],
      ["撒娇频率？", "高", "偶尔", "少", "不会"],
      ["觉得被忽略时？", "更黏", "更冷", "说出来", "假装没事"],
      ["你的爱情表达？", "陪伴", "帮忙做事", "礼物", "分享生活"],
      ["对方责备你时？", "反驳", "沉默", "情绪敏感", "反思"],
      ["你觉得最浪漫？", "每天联系", "惊喜", "深度交流", "默契"],
      ["吵架后更希望对方？", "马上哄你", "理性沟通", "给空间", "主动认错"],
      ["对伴侣缺点，你会？", "包容", "引导", "改自己", "纠结"],
      ["最理想的恋爱？", "强烈热恋", "温柔稳定", "互相成长", "自由轻松"]
    ]
  }
];

const quiz = document.getElementById("quiz");
let qIndex = 0;

sections.forEach(section => {
  const h2 = document.createElement("h2");
  h2.textContent = section.title;
  quiz.appendChild(h2);

  section.questions.forEach(q => {
    const div = document.createElement("div");
    div.className = "question";
    div.innerHTML =
      `<h3>${qIndex + 1}. ${q[0]}</h3>` +
      ["A", "B", "C", "D"].map((l, i) =>
        `<label>
          <input type="radio" name="q${qIndex}" value="${l}">
          ${l}. ${q[i + 1]}
        </label><br>`
      ).join("");
    quiz.appendChild(div);
    qIndex++;
  });
});

function submitQuiz() {
  const count = { A: 0, B: 0, C: 0, D: 0 };

  for (let i = 0; i < qIndex; i++) {
    const ans = document.querySelector(`input[name="q${i}"]:checked`);
    if (ans) count[ans.value]++;
  }

  const type = Object.keys(count).reduce((a, b) => count[a] > count[b] ? a : b);

  const results = {
    A: `
    <h2>🅐 高依恋型（需要安全感）</h2>
    <h3>你的恋爱特点</h3>
    <ul>
      <li>爱得深、投入快</li>
      <li>对方的小变化会触发不安全感</li>
      <li>容易多想、容易受伤</li>
      <li>情感表达强烈、很黏人</li>
    </ul>
    <h3>你在关系中最需要</h3>
    <ul>
      <li>稳定的回应</li>
      <li>明确的关系确认</li>
      <li>温柔的陪伴</li>
    </ul>
    <h3>可能的弱点</h3>
    <ul>
      <li>过度依赖</li>
      <li>情绪波动</li>
      <li>容易失去自己</li>
    </ul>
    `,
    B: `
    <h2>🅑 理性独立型（稳重成熟）</h2>
    <h3>你的恋爱特点</h3>
    <ul>
      <li>不轻易动心，但一旦选择就很稳定</li>
      <li>不喜欢情绪化的关系</li>
      <li>尊重对方空间，也需要自己的空间</li>
    </ul>
    <h3>你的关系需求</h3>
    <ul>
      <li>清晰沟通</li>
      <li>理性与尊重</li>
      <li>独立且平衡的亲密</li>
    </ul>
    <h3>可能的弱点</h3>
    <ul>
      <li>不够热情</li>
      <li>不够主动</li>
      <li>容易让伴侣没有安全感</li>
    </ul>
    `,
    C: `
    <h2>🅒 敏感细腻型（深情但脆弱）</h2>
    <h3>你的恋爱特点</h3>
    <ul>
      <li>观察细节，心思细腻</li>
      <li>容易感受对方情绪</li>
      <li>付出很多但不善表达</li>
    </ul>
    <h3>你的关系需求</h3>
    <ul>
      <li>温暖理解</li>
      <li>温柔沟通</li>
      <li>情绪稳定的伴侣</li>
    </ul>
    <h3>可能的弱点</h3>
    <ul>
      <li>容易内耗</li>
      <li>不会表达需求</li>
      <li>遇事容易自责</li>
    </ul>
    `,
    D: `
    <h2>🅓 自由洒脱型（独立灵魂）</h2>
    <h3>你的恋爱特点</h3>
    <ul>
      <li>爱情重要但不被其束缚</li>
      <li>讨厌控制和压力</li>
      <li>偏好轻松自然的相处</li>
    </ul>
    <h3>你的关系需求</h3>
    <ul>
      <li>尊重空间</li>
      <li>平等关系</li>
      <li>自由但稳定</li>
    </ul>
    <h3>可能的弱点</h3>
    <ul>
      <li>回避冲突</li>
      <li>不愿深入情感</li>
      <li>容易让伴侣觉得不够在意</li>
    </ul>
    `
  };

  document.getElementById("result").innerHTML = results[type];
}
